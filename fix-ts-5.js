const fs = require("fs"); const replaceFile = (file, replacements) => { let content = fs.readFileSync(file, "utf8"); let modified = false; replacements.forEach(r => { if(content.includes(r.from)) { content = content.replace(r.from, r.to); modified = true; } else if (r.regex && content.match(r.regex)) { content = content.replace(r.regex, r.to); modified = true; } }); if(modified) { fs.writeFileSync(file, content); console.log("Fixed " + file); } }; replaceFile("src/controller/colorController.ts", [ {regex: /page \? Number\(req\.query\.page\) : page;/g, to: "page ? Number(req.query.page) : undefined;"}, {regex: /limit \? Number\(req\.query\.limit\) : limit;/g, to: "limit ? Number(req.query.limit) : undefined;"}, {regex: /parseInt\(page as string\)/g, to: "page"}, {regex: /parseInt\(limit as string\)/g, to: "limit"} ]); replaceFile("src/controller/sizeChartController.ts", [ {regex: /page \? Number\(req\.query\.page\) : page;/g, to: "page ? Number(req.query.page) : undefined;"}, {regex: /limit \? Number\(req\.query\.limit\) : limit;/g, to: "limit ? Number(req.query.limit) : undefined;"}, {regex: /parseInt\(page as string\)/g, to: "page"}, {regex: /parseInt\(limit as string\)/g, to: "limit"} ]);
